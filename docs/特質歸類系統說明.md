# 特質歸類系統說明

## 概述

系統中的特質（Traits）歸類有**兩個層面**：

1. **LLM 的理論分類** - 用於引導 AI 理解和提取特質
2. **資料庫的實際分類** - 真實的測評系統中的特質和分類

## 1. LLM 的理論分類（System Prompt）

在 `BackEnd/talent_search_api.py` 的 System Prompt 中定義：

### 四大類別

#### 人際類

- 溝通能力
- 說服力
- 同理心
- 親和力
- 團隊合作

#### 認知類

- 邏輯思維
- 分析能力
- 創造力
- 學習能力
- 問題解決

#### 性格類

- 外向性
- 內向性
- 適應力
- 抗壓性
- 穩定性

#### 工作類

- 細心度
- 專注力
- 組織能力
- 目標導向
- 執行力

**用途**: 這個分類幫助 LLM 理解用戶的需求，並將自然語言轉換為結構化的特質要求。

## 2. 資料庫的實際分類

資料庫中有 **50 個特質** 和 **12 個分類**。

### 資料庫結構

```
trait (特質表)
├─ id
├─ chinese_name (中文名稱)
├─ system_name (系統名稱)
└─ description (描述)

test_project_category (分類表)
├─ id
├─ name (分類名稱)
└─ description (描述)

test_project_category_trait (關聯表)
├─ category_id
└─ trait_id
```

### 12 個實際分類

1. **核心工作動能** (3 個特質)

   - 個人責任感、工作熱忱、心理資本
   - 反映職場穩定性、執行力與自驅力

2. **品格誠信素養** (4 個特質)

   - 感謝、權益公平感、真實性、誠實謙遜
   - 評估誠實可信、價值觀健康

3. **團隊協作與互動能力** (3 個特質)

   - 同理心、集體意識
   - 評估人際互動與團隊合作成熟度

4. **成長創新驅動力** (3 個特質)

   - 個人成長動機、創新力、生活熱情
   - 反映未來潛力與變革適應能力

5. **工作態度與執行力** (6 個特質)

   - 創新力、完美主義、成就追求、權益公平感、義務感、自律性
   - 核心技術研發／技術創造者

6. **心理韌性與正向思維** (7 個特質)

   - 堅韌性、希望、心理資本、成就追求、效能感、樂觀、真實性
   - 應用開發設計／創新驅動者

7. **人際關係與道德操守** (6 個特質)

   - 人際適應力、同情、心理資本、誠實謙遜、集體意識、韌性
   - 策略管理／商業規劃者

8. **技術創造者** (8 個特質)

   - AI 素養、分析性思考、好奇心、批判性思考、準確嚴謹度、系統性思考、終身學習、自我覺察
   - 核心技術研發人才

9. **創新應用者** (9 個特質)

   - AI 素養、分析性思考、創造性思考、同理心、好奇心、系統性思考、自主領導、自我覺察、認知彈性、適應敏捷
   - 應用開發設計人才

10. **決策規劃者**

    - 策略管理／商業規劃者

11. **轉型推動者**

    - 轉型推動／文化催化者

12. **高效採用者**
    - 工具使用者／生產力提升者

### 50 個特質列表

| ID  | 中文名稱     | 系統名稱                    | 主要分類           |
| --- | ------------ | --------------------------- | ------------------ |
| 1   | 成就追求     | Desire To Compete           | 工作態度與執行力   |
| 2   | 義務感       | Efficacy                    | 工作態度與執行力   |
| 3   | 權益公平感   | Equity Perception           | 品格誠信素養       |
| 4   | 完美主義     | Feedback Seeking            | 工作態度與執行力   |
| 5   | 自律性       | Hard Driving                | 工作態度與執行力   |
| 6   | 創新力       | Hope                        | 成長創新驅動力     |
| 8   | 效能感       | Job Involvement             | 心理韌性與正向思維 |
| 9   | 希望         | Liveliness                  | 心理韌性與正向思維 |
| 10  | 樂觀         | Malleability                | 心理韌性與正向思維 |
| 11  | 堅韌性       | Optimism                    | 心理韌性與正向思維 |
| 13  | 誠實謙遜     | Professionalism             | 人際關係與道德操守 |
| 15  | 韌性         | Resilience                  | 人際關係與道德操守 |
| 17  | 同情         | Temper                      | 人際關係與道德操守 |
| 18  | 人際適應力   | Interpersonal Versatility   | 人際關係與道德操守 |
| 19  | 盡責         | Conscientiousness           | -                  |
| 20  | 個人責任感   | Personal Accountability     | 核心工作動能       |
| 21  | 工作熱忱     | Work Passion                | 核心工作動能       |
| 22  | 誠實謙遜     | Honesty-Humility            | 品格誠信素養       |
| 23  | 真實性       | Authenticity                | 品格誠信素養       |
| 24  | 感謝         | Gratitude                   | 品格誠信素養       |
| 25  | 集體意識     | Collective Orientation      | 團隊協作與互動能力 |
| 26  | 同理心       | Empathy                     | 團隊協作與互動能力 |
| 28  | 創新力       | Innovativeness              | 成長創新驅動力     |
| 29  | 個人成長動機 | Personal Growth Initiative  | 成長創新驅動力     |
| 30  | 生活熱情     | Zest                        | 成長創新驅動力     |
| 31  | 分析性思考   | Analytical Thinking         | 技術創造者         |
| 32  | 好奇心       | Curiosity                   | 技術創造者         |
| 33  | 終身學習     | Lifelong Learning           | 技術創造者         |
| 34  | 系統性思考   | Systems Thinking            | 技術創造者         |
| 35  | 準確嚴謹度   | Attention to Detail         | 技術創造者         |
| 36  | 批判性思考   | Critical Thinking           | 技術創造者         |
| 37  | 自我覺察     | Self-Awareness              | 技術創造者         |
| 38  | AI 素養      | AI Literacy                 | 技術創造者         |
| 39  | 認知彈性     | Cognitive Flexibility       | 創新應用者         |
| 40  | 適應敏捷     | Change Agility              | 創新應用者         |
| 41  | 自主領導     | Self-Leadership             | 創新應用者         |
| 42  | 創造性思考   | Creative Thinking           | 創新應用者         |
| 43  | 人際影響力   | Social Influence            | -                  |
| 44  | 卓越追求動機 | Achievement Motivation      | -                  |
| 45  | 高效決策     | Decision-Making             | -                  |
| 46  | 積極傾聽     | Active Listening            | -                  |
| 47  | 協調溝通     | Interpersonal Communication | -                  |
| 48  | 協商談判     | Negotiation Skills          | -                  |
| 49  | 社交智商     | Social Intelligence         | -                  |
| 50  | 責任穩定性   | Dependability               | -                  |

## 3. 兩個分類系統的關係

### LLM 分類 → 資料庫特質的映射

| LLM 分類   | 對應的資料庫特質                                                                 |
| ---------- | -------------------------------------------------------------------------------- |
| **人際類** | 同理心、人際適應力、集體意識、協調溝通、積極傾聽、社交智商、協商談判             |
| **認知類** | 分析性思考、批判性思考、系統性思考、創造性思考、認知彈性、好奇心、終身學習       |
| **性格類** | 樂觀、堅韌性、韌性、適應敏捷、真實性、誠實謙遜                                   |
| **工作類** | 成就追求、義務感、自律性、完美主義、準確嚴謹度、個人責任感、工作熱忱、責任穩定性 |

### 工作流程

1. **用戶輸入**: "我需要一個善於溝通的銷售人員"

2. **LLM 解析** (使用理論分類):

   ```json
   {
     "traits": ["溝通能力", "說服力"], // LLM 的人際類
     "role": "銷售人員"
   }
   ```

3. **映射到資料庫** (目前是簡化版):

   - 系統查詢所有候選人
   - 檢查候選人的測評結果
   - 計算匹配分數

4. **未來改進** (使用實際分類):
   ```sql
   SELECT ip.*, itr.trait_results
   FROM individual_profile ip
   JOIN individual_test_result itr ON ip.id = itr.individual_id
   WHERE itr.trait_results @> '{"協調溝通": {"score": 80}}'
   ORDER BY (itr.trait_results->>'協調溝通')::int DESC
   ```

## 4. 如何改進匹配算法

### 當前實作（簡化版）

```python
def calculate_match_score(candidate, parsed_query):
    score = 0.5  # 基礎分數
    if candidate.get('test_results'):
        score += 0.3  # 有測評結果
    if parsed_query.get('traits'):
        score += 0.2  # 有特質匹配
    return score
```

### 建議改進（使用實際特質）

```python
def calculate_match_score_advanced(candidate, parsed_query):
    score = 0
    max_score = 0

    # 從 LLM 提取的特質
    required_traits = parsed_query.get('traits', [])

    # 映射到資料庫特質
    trait_mapping = {
        '溝通能力': ['協調溝通', '積極傾聽', '人際影響力'],
        '分析能力': ['分析性思考', '批判性思考', '系統性思考'],
        '創造力': ['創造性思考', '創新力', '認知彈性'],
        # ... 更多映射
    }

    # 從候選人的測評結果中提取特質分數
    trait_results = candidate.get('test_results', [{}])[0].get('trait_results', {})

    for required_trait in required_traits:
        db_traits = trait_mapping.get(required_trait, [])

        for db_trait in db_traits:
            max_score += 100
            if db_trait in trait_results:
                trait_score = trait_results[db_trait].get('score', 0)
                score += trait_score

    return score / max_score if max_score > 0 else 0.5
```

## 5. 總結

### 當前狀態

- ✅ LLM 使用理論分類理解用戶需求
- ✅ 資料庫有完整的特質和分類系統
- ⚠️ 兩者之間的映射是簡化的

### 改進方向

1. **建立映射表** - LLM 特質 → 資料庫特質
2. **使用實際分數** - 從 `trait_results` JSON 中提取分數
3. **加權計算** - 不同特質有不同權重
4. **向量搜索** - 使用 Embedding 進行語義匹配

### 優勢

- **靈活性** - LLM 可以理解各種表達方式
- **準確性** - 資料庫有真實的測評數據
- **可擴展** - 易於添加新特質和分類
